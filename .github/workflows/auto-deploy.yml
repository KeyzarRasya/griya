name: Deploy to VPS

on:
    push:
        branches:
            - main

jobs:
    deploy:
        runs-on: self-hosted
        steps:
            -   name: Pull latest code
                run: |
                    cd /opt/web
                    git pull origin main

            -   name: Reload Docker Container
                run: |
                    cd /opt/web
                    docker compose down
                    docker compose up -d --build
